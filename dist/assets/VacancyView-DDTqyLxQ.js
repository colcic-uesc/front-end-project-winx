import{_ as q,u as S,r as m,b as k,o as c,c as y,a as t,m as C,k as p,w as D,y as I,B as _,q as M,x as B,F as U,d as E,t as N,f as x,p as O,g as j,C as A,l as R,e as V,i as $,h as P,j as T}from"./index-DDnPH6aG.js";import{I as h,B as z}from"./ButtonComponent-ClYkf8Gc.js";import{u as L,p as Y,c as G}from"./vacancies-L-RnlYzh.js";import"./httpClient-CwG61txm.js";const u=i=>(O("data-v-b8186ffa"),i=i(),j(),i),H={class:"container"},J=u(()=>t("h2",null,"Dados da vaga",-1)),K={class:"form-group"},Q={class:"form-group"},W=u(()=>t("option",{disabled:"",value:""},"Status",-1)),X=u(()=>t("option",{value:"Aberta"},"Aberta",-1)),Z=u(()=>t("option",{value:"Fechada"},"Fechada",-1)),aa=[W,X,Z],ea={class:"form-group"},oa={class:"form-group"},ta=u(()=>t("label",{for:"dataInicio"},"Data de Início",-1)),sa={class:"form-group"},la=u(()=>t("label",{for:"dataTermino"},"Data de Término",-1)),na={class:"form-group"},ia=A('<option disabled value="" data-v-b8186ffa>Tipo de Vaga</option><option value="1" data-v-b8186ffa>Estágio</option><option value="2" data-v-b8186ffa>Iniciação Científica</option><option value="3" data-v-b8186ffa>Iniciação à Docência</option><option value="4" data-v-b8186ffa>TCC</option><option value="5" data-v-b8186ffa>Projeto de Extensão</option>',6),ra=[ia],ca={class:"form-group descricao"},ua={class:"form-group requisitos"},da={class:"button-container"},va={key:0,class:"validation-message-container"},pa={__name:"VacancyFormComponent",props:["vacancy","professorID"],setup(i){const d=S(),s=i,a=m({titulo:"",status:"",valor:"",dataInicio:"",dataTermino:"",tipoVaga:"",descricao:"",requisitos:""}),n=m([]);k(async()=>{console.log(s.vacancy),console.log(s.professorID),s.vacancy&&(console.log(s.vacancy),a.value.valor=s.vacancy.value,a.value.dataInicio=s.vacancy.startDate,a.value.dataTermino=s.vacancy.endDate,a.value.requisitos=s.vacancy.requirements,a.value.descricao=s.vacancy.description,a.value.titulo=s.vacancy.projectTitle,a.value.status=s.vacancy.status,a.value.tipoVaga=s.vacancy.vacancyTypeID),console.log(a.value)});const r=()=>{const l=[];return a.value.titulo?a.value.titulo.length<10&&l.push("O campo 'Título' deve ter no mínimo 10 caracteres."):l.push("O campo 'Título' é obrigatório."),a.value.valor||(a.value.valor=0),a.value.valor<0&&l.push("O campo 'Valor' não pode ser negativo."),a.value.dataInicio||l.push("O campo 'Data de Início' é obrigatório."),a.value.dataTermino?new Date(a.value.dataTermino)<=new Date(a.value.dataInicio)&&l.push("A 'Data de Término' deve ser maior que a 'Data de Início'."):l.push("O campo 'Data de Término' é obrigatório."),a.value.status||l.push("Selecione um 'Status' para a vaga."),a.value.tipoVaga||l.push("Selecione um 'Tipo de Vaga' para a vaga."),l},v=()=>{n.value=r(),n.value.length===0?(n.value=[],console.log(a.value),f()):console.log(n.value)},f=async()=>{const l={value:a.value.valor,startDate:a.value.dataInicio,endDate:a.value.dataTermino,requirements:a.value.requisitos,description:a.value.descricao,projectTitle:a.value.titulo,status:a.value.status,professorID:s.professorID,vacancyTypeID:a.value.tipoVaga},o=localStorage.getItem("token");if(s.vacancy)try{l.vacancyID=s.vacancy.vacancyID;const e=await L(s.vacancy.vacancyID,l,o);console.log(e)}catch(e){console.log(e)}else try{const e=await Y(l,s.professorID,o);console.log(e)}catch(e){console.log(e)}console.log("Vaga adicionada com sucesso!"),d.push({name:"professor-profile",params:{id:s.professorID}})};return(l,o)=>(c(),y("div",null,[t("div",H,[J,t("form",{onSubmit:C(v,["prevent"])},[t("div",K,[p(h,{modelValue:a.value.titulo,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.titulo=e),type:"text",placeholder:"Título"},null,8,["modelValue"])]),t("div",Q,[D(t("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.status=e),class:"custom-select"},aa,512),[[I,a.value.status]])]),t("div",ea,[p(h,{modelValue:a.value.valor,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.valor=e),type:"number",placeholder:"Valor"},null,8,["modelValue"])]),t("div",oa,[ta,p(h,{id:"dataInicio",modelValue:a.value.dataInicio,"onUpdate:modelValue":o[3]||(o[3]=e=>a.value.dataInicio=e),type:"date",placeholder:"dd/mm/aaaa"},null,8,["modelValue"])]),t("div",sa,[la,p(h,{id:"dataTermino",modelValue:a.value.dataTermino,"onUpdate:modelValue":o[4]||(o[4]=e=>a.value.dataTermino=e),type:"date",placeholder:"dd/mm/aaaa"},null,8,["modelValue"])]),t("div",na,[D(t("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>a.value.tipoVaga=e),class:"custom-select"},ra,512),[[I,a.value.tipoVaga]])]),t("div",ca,[D(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>a.value.descricao=e),placeholder:"Descrição",class:"custom-textarea"},null,512),[[_,a.value.descricao]])]),t("div",ua,[D(t("textarea",{"onUpdate:modelValue":o[7]||(o[7]=e=>a.value.requisitos=e),placeholder:"Requisitos",class:"custom-textarea"},null,512),[[_,a.value.requisitos]])]),t("div",da,[p(z,{btnClass:"custom-button",btnType:"submit"},{default:M(()=>[B(" Finalizar ")]),_:1})])],32),n.value.length>0?(c(),y("div",va,[t("ul",null,[(c(!0),y(U,null,E(n.value,e=>(c(),y("li",{key:e},N(e),1))),128))])])):x("",!0)])]))}},b=q(pa,[["__scopeId","data-v-b8186ffa"]]),Da={__name:"VacancyView",props:{editMode:{type:Boolean,default:!1}},setup(i){const d=S(),s=R(),a=m(null),n=i,r=m(null),v=m(!0),f=o=>{const e=new Date(o),g=e.getFullYear(),w=String(e.getMonth()+1).padStart(2,"0"),F=String(e.getDate()).padStart(2,"0");return`${g}-${w}-${F}`},l=()=>{const o=localStorage.getItem("token");if(o){const e=$(o),g=P(o);a.value=T(o),console.log(e,g,a.value,T(o)),g<new Date?(localStorage.removeItem("token"),d.push("/login")):e!=="Professor"&&d.push("/login")}else d.push("/login")};return k(async()=>{console.log(n.editMode),l(),n.editMode&&(r.value=await G(s.params.id),r.value.startDate=f(r.value.startDate),r.value.endDate=f(r.value.endDate)),v.value=!1}),(o,e)=>i.editMode&&!v.value?(c(),V(b,{key:0,vacancy:r.value,professorID:a.value},null,8,["vacancy","professorID"])):v.value?x("",!0):(c(),V(b,{key:1,professorID:a.value},null,8,["professorID"]))}};export{Da as default};
