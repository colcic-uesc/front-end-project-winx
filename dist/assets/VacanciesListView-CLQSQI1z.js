import{_ as C,r as g,o as v,c as f,w as M,v as O,a as y,t as L,b,F as k,d as w,e as I,f as B,p as D,g as S,h as A,i as E,j as q,k as x}from"./index-DDnPH6aG.js";import{V as N}from"./VacancyItemComponent-Ck05ZLOC.js";import{g as P,a as U}from"./vacancies-L-RnlYzh.js";import{g as j}from"./students-Dmmjq8w4.js";import"./professors-BNZYAvCQ.js";import"./httpClient-CwG61txm.js";const Y={class:"checkbox-container"},R=["id"],z=["for"],G={__name:"CheckBoxComponent",props:{name:String,value:Boolean,label:String},emits:["customChecked"],setup(t,{emit:u}){const n=u,s=t,c=g(s.value);function m(h){c.value=h.target.checked,n("customChecked",{name:s.name,value:c.value})}return(h,e)=>(v(),f("div",Y,[M(y("input",{type:"checkbox",id:t.name,"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),onChange:m},null,40,R),[[O,c.value]]),y("label",{for:t.name},L(t.label),9,z)]))}},$=C(G,[["__scopeId","data-v-9c2c8124"]]),H={class:"filter-container"},J={__name:"VacancyFilterComponent",props:{optionsList:{type:Object,required:!0},mode:{type:String,required:!0}},emits:["filterChanged"],setup(t,{emit:u}){const n=t,s=g([]),c=u,m=e=>{switch(e){case"always":return!0;case"logged":return n.mode==="studentMode"||n.mode==="professorMode";default:return!1}},h=({name:e,value:r})=>{let p=s.value.findIndex(_=>_.name===e);s.value[p].value=r,c("filterChanged",s.value)};return b(()=>{console.log(n.optionsList),n.optionsList.forEach(e=>{s.value.push({name:e.name,value:e.value})})}),(e,r)=>(v(),f("div",H,[(v(!0),f(k,null,w(t.optionsList,p=>(v(),f(k,null,[m(p.show)?(v(),I($,{key:0,name:p.name,value:p.value,label:p.label,onCustomChecked:h},null,8,["name","value","label"])):B("",!0)],64))),256))]))}},K=C(J,[["__scopeId","data-v-81ab285f"]]),Q=t=>(D("data-v-ba60b69b"),t=t(),S(),t),W={class:"category-filter-container"},X=Q(()=>y("div",{class:"heading-tertiary category-title"}," Categorias ",-1)),Z={class:"category-filter"},ee={__name:"VancancyCategoriesComponent",props:{categories:{type:Array,required:!0},checkedCategories:{type:Array,required:!0}},emits:["categoriesChanged"],setup(t,{emit:u}){const n=t,s=u;b(async()=>{});function c({name:m,value:h}){let e=n.checkedCategories.findIndex(r=>r===m);e===-1?n.checkedCategories.push(m):n.checkedCategories.splice(e,1),s("categoriesChanged",n.checkedCategories)}return(m,h)=>(v(),f("div",W,[X,y("div",Z,[(v(!0),f(k,null,w(t.categories,e=>(v(),I($,{name:e.vacancyTypeID.toString(),value:t.checkedCategories.includes(e.vacancyTypeID.toString()),label:e.name,onCustomChecked:c},null,8,["name","value","label"]))),256))])]))}},ae=C(ee,[["__scopeId","data-v-ba60b69b"]]),te=t=>(D("data-v-ece73f16"),t=t(),S(),t),ne={class:"content-wrapper"},oe=te(()=>y("h2",null,"Vagas DisponÃ­veis",-1)),se={class:"vacancies"},ce={class:"vacancy-filter-container"},re={class:"vacancy-list-container"},le={class:"vacancy-list"},ie={__name:"VacanciesListView",setup(t){const u=g([]),n=g([]),s=g([]),c=g("viewMode"),m=[{name:"showOnlyOpened",value:!0,label:"Mostrar somente vagas abertas",show:"always"},{name:"showOnlyPriced",value:!1,label:"Mostrar somente vagas remuneradas",show:"always"},{name:"hideYours",value:!1,label:"Esconder minhas vagas",show:"logged"}],h=g(m.map(a=>({name:a.name,value:a.value}))),e=g([]),r=g([]),p=(a,l)=>l.filter(o=>a.includes(o.vacancyTypeID.toString())),_=(a,l)=>{let o=l;return a.forEach(d=>{d.name==="hideYours"&&d.value&&(o=o.filter(i=>!V(i))),d.name==="showOnlyPriced"&&d.value&&(o=o.filter(i=>i.value>0)),d.name==="showOnlyOpened"&&d.value&&(o=o.filter(i=>i.status==="Aberta"))}),o},V=a=>s.value.some(l=>l.vacancyID===a.vacancyID);function T(a){a.value=a,_.value=_(a.value,u.value),n.value=p(r.value,_.value)}function F(a){r.value=a,n.value=p(r.value,u.value),n.value=_(h.value,n.value)}return b(async()=>{try{e.value=await P(),r.value=e.value.map(l=>l.vacancyTypeID.toString())}catch(l){console.error(l)}try{u.value=await U()}catch(l){console.error(l)}n.value=p(r.value,u.value),n.value=_(h.value,n.value);const a=localStorage.getItem("token");if(a)if(A(a)>new Date){const o=E(a),d=q(a);if(o==="Student"){c.value="studentMode";try{const i=await j(d,a);s.value=i}catch(i){console.error(i)}}else o==="Professor"?(c.value="professorMode",s.value=u.value.filter(i=>i.professorID==d)):console.error("Invalid role")}else localStorage.removeItem("token")}),(a,l)=>(v(),f("div",ne,[oe,y("div",se,[y("div",ce,[x(K,{onFilterChanged:T,"options-list":m,mode:c.value},null,8,["mode"]),x(ae,{onCategoriesChanged:F,categories:e.value,"checked-categories":r.value},null,8,["categories","checked-categories"])]),y("div",re,[y("div",le,[(v(!0),f(k,null,w(n.value,o=>(v(),I(N,{key:o.vacancyID,vacancy:o,"template-mode":c.value,"owned-vacancy":V(o),onApplied:d=>s.value.push(o),onUnsubscribed:d=>s.value=s.value.filter(i=>i.vacancyID!==o.vacancyID)},null,8,["vacancy","template-mode","owned-vacancy","onApplied","onUnsubscribed"]))),128))])])])]))}},ge=C(ie,[["__scopeId","data-v-ece73f16"]]);export{ge as default};
